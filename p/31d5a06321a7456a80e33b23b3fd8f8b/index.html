<!doctype html><html><title>git的使用记录</title><meta name=description content="记录git的使用方法 git log 查看每次提交的diff git log -p filename 查看filename相关的commit记录 git log filename 查看某个人的提交记录 git log author=&amp;#34;username&amp;#34; filename 查看变更文"><meta name=generator content="Hugo 0.93.3">
<meta property="og:title" content="git的使用记录">
<meta property="og:description" content="记录git的使用方法 git log 查看每次提交的diff git log -p filename 查看filename相关的commit记录 git log filename 查看某个人的提交记录 git log author=&#34;username&#34; filename 查看变更文">
<meta property="og:type" content="article">
<meta property="og:url" content="https://arair.net/p/31d5a06321a7456a80e33b23b3fd8f8b/"><meta property="article:section" content="p">
<meta property="article:published_time" content="2021-01-21T10:39:15+08:00">
<meta property="article:modified_time" content="2021-12-19T09:14:39+08:00">
<meta itemprop=name content="git的使用记录">
<meta itemprop=description content="记录git的使用方法 git log 查看每次提交的diff git log -p filename 查看filename相关的commit记录 git log filename 查看某个人的提交记录 git log author=&#34;username&#34; filename 查看变更文"><meta itemprop=datePublished content="2021-01-21T10:39:15+08:00">
<meta itemprop=dateModified content="2021-12-19T09:14:39+08:00">
<meta itemprop=wordCount content="1521">
<meta itemprop=keywords content="git,">
<style type=text/css>.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto;padding:45px}@media(max-width:767px){.markdown-body{padding:15px}}</style><script>function setTheme({el:e=document.documentElement,mode:t="auto",light:n="light",dark:s="dark"}){e.dataset.colorMode=t,e.dataset.lightTheme=n,e.dataset.darkTheme=s}let prefersDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches;prefersDarkMode&&setTheme({mode:"dark"})</script>
<link rel=stylesheet href=/style.css type=text/css><body id=content class=markdown-body>
<body>
<div id=post class=post>
<article>
<header>
<h1 class=post-title>git的使用记录</h1><p>
<small>
2021-01-21, updated 2021-12-19
</small>
</p></header><aside>
<nav id=TableOfContents>
<ul>
<li><a href=#git-log>git log</a></li><li><a href=#git-show命令>git show命令</a>
<ul>
<li><a href=#使用方法>使用方法</a></li><li><a href=#描述>描述</a></li><li><a href=#示例>示例</a></li></ul></li><li><a href=#git-reset命令>git reset命令</a></li><li><a href=#git-commit命令>git commit命令</a></li><li><a href=#git-rev-parse>git rev-parse</a></li><li><a href=#git-clean>git clean</a></li><li><a href=#其它杂项>其它杂项</a></li><li><a href=#使用中遇到的问题>使用中遇到的问题</a>
<ul>
<li><a href=#git-error-unable-to-stat-just-written-file>Git error: unable to stat just-written file&mldr;</a></li></ul></li><li><a href=#问题>问题</a>
<ul>
<li><a href=#git-status中文文件名编码问题解决>git status中文文件名编码问题解决</a></li><li><a href=#git如何合并某一次commit的内容到指定分支>Git如何合并某一次commit的内容到指定分支</a></li></ul></li></ul></nav></aside><p>记录git的使用方法</p><h2 id=git-log>git log</h2><ol>
<li>查看每次提交的diff</li></ol><pre tabindex=0><code>git log -p filename
</code></pre><ol start=2>
<li>查看filename相关的commit记录</li></ol><pre tabindex=0><code>git log filename
</code></pre><ol start=3>
<li>查看某个人的提交记录</li></ol><pre tabindex=0><code>git log author=&#34;username&#34; filename
</code></pre><ol start=4>
<li>查看变更文件</li></ol><pre tabindex=0><code>git log --raw
</code></pre><ol start=5>
<li>查看每次提交的简略统计信息</li></ol><pre tabindex=0><code>git log --stat
</code></pre><h2 id=git-show命令>git show命令</h2><p><code>git show</code>命令用于显示各种类型的对象。</p><h3 id=使用方法>使用方法</h3><pre tabindex=0><code>git show [options] &lt;object&gt;...
</code></pre><h3 id=描述>描述</h3><p>显示一个或多个对象（<code>blobs</code>，树，标签和提交）。</p><ul>
<li>提交，它显示日志消息和文本差异。它还以<code>git diff-tree --cc</code>生成的特殊格式呈现合并提交。</li><li>标签，它显示标签消息和引用对象。</li><li>树，它显示的名称（相当于使用<code>git ls-tree</code>和<code>--name-only</code>选项）。</li><li>blobs，显示了普通的内容。</li></ul><p>该命令采用适用于<code>git diff-tree</code>命令的选项来控制如何显示提交引入的更改。</p><h3 id=示例>示例</h3><p>以下是一些示例</p><ol>
<li>显示标签v1.0.0，以及标签指向的对象</li></ol><pre tabindex=0><code>git show v1.0.0
</code></pre><ol start=2>
<li>显示标签v1.0.0指向的树</li></ol><pre tabindex=0><code>git show v1.0.0^{tree}
</code></pre><ol start=3>
<li>显示v1.0.0指向的提交的主题</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>git show -s --format=%s v1.0.0^{commit}
</span></span></code></pre></div><ol start=4>
<li>显示Documentation/README文件的内容，它们是next分支的第10次最后一次提交的内容</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>git show next~10:Documentation/README
</span></span></code></pre></div><ol start=5>
<li>将Makefile的内容连接到分支主控的头部</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>git show master:Makefile master:t/Makefile
</span></span></code></pre></div><h2 id=git-reset命令>git reset命令</h2><p>撤销没有push的commit</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>git reset --soft HEAD^
</span></span></code></pre></div><p>HEAD^的意思是上一个版本</p><h2 id=git-commit命令>git commit命令</h2><p>提交修改内容</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-txt data-lang=txt><span class=line><span class=cl>git commit -m &#34;change log&#34; filename
</span></span></code></pre></div><p>git修改commit注释 已提交但并未push</p><blockquote>
<p>只需要修改最新的一次commit注释<br>
之后执行<code>git commit --amend</code>, 之后便可以利用vim来进行编辑，编辑之后注释为create new file 2 after change。(vim可按i键进入编辑模式，esc退出编辑模式，ZZ保存并退出。更多操作可查阅vim相关资料)</p></blockquote><h2 id=git-rev-parse>git rev-parse</h2><p>获取完整commit id（如：bb4f92a7d4cbafb67d259edea5a1fa2dd6b4cc7a）</p><pre tabindex=0><code>git rev-parse HEAD
</code></pre><p>获取short commit id（如：bb4f92a）</p><pre tabindex=0><code>git rev-parse --short HEAD
</code></pre><h2 id=git-clean>git clean</h2><p>首先确认要删除的文件
git clean -fd -n</p><p>如果以上命令给出的文件列表是你想删除的， 那么接下来执行</p><p>git clean -f -d或者git clean -fd就可以了。</p><p>其中-f表示文件 -d表示目录, 如果还要删除.gitignore中的文件那么再加上-x (-x对我来说没用）</p><p>如果git submodule中也存在需要删除的文件那么需要再加个-f， 变成git clean -dff</p><pre tabindex=0><code># 删除 untracked files
git clean -f
 
# 连 untracked 的目录也一起删掉
git clean -fd
 
# 连 gitignore 的untrack 文件/目录也一起删掉 （慎用，一般这个是用来删掉编译出来的 .o之类的文件用的）
git clean -xfd
 
# 在用上述 git clean 前，墙裂建议加上 -n 参数来先看看会删掉哪些文件，防止重要文件被误删
git clean -nxfd
git clean -nf
git clean -nfd
</code></pre><h2 id=其它杂项>其它杂项</h2><p>windows 平台git版本升级</p><pre tabindex=0><code>git update-git-for-windows
</code></pre><h2 id=使用中遇到的问题>使用中遇到的问题</h2><h3 id=git-error-unable-to-stat-just-written-file>Git error: unable to stat just-written file&mldr;</h3><h4 id=解释>解释</h4><p>无法统计刚刚写入的文件。</p><h4 id=解决>解决</h4><p>文件名不被允许使用，给文件重命名即可。</p><h4 id=tip>tip</h4><p>本次出错原因：windows 不能命名 con.png
另：由系统保留的设备名字不能用作文件名
CON,PRN,AUX,CLOCK$,NUL,COM1,COM2,COM3,COM4,COM5,COM6,COM7,COM8,COM9,LPT1</p><h2 id=问题>问题</h2><h3 id=git-status中文文件名编码问题解决>git status中文文件名编码问题解决</h3><p>在默认设置下，中文文件名在工作区状态输出，中文名不能正确显示，而是显示为八进制的字符编码。</p><p>通过将git配置变量 core.quotepath 设置为false，就可以解决中文文件名称在这些Git命令输出中的显示问题,</p><pre tabindex=0><code>git config --global core.quotepath false
</code></pre><h3 id=git如何合并某一次commit的内容到指定分支>Git如何合并某一次commit的内容到指定分支</h3><p>Cherry pick 支持一次转移多个提交。</p><pre tabindex=0><code>git cherry-pick &lt;HashA&gt; &lt;HashB&gt;
</code></pre><p>上面的命令将 A 和 B 两个提交应用到当前分支。这会在当前分支生成两个对应的新提交。</p><p>如果想要转移一系列的连续提交，可以使用下面的简便语法。</p><pre tabindex=0><code>$ git cherry-pick A..B 
</code></pre><p>上面的命令可以转移从 A 到 B 的所有提交。它们必须按照正确的顺序放置：提交 A 必须早于提交 B，否则命令将失败，但不会报错。</p><p>注意，使用上面的命令，提交 A 将不会包含在 Cherry pick 中。如果要包含提交 A，可以使用下面的语法。</p><pre tabindex=0><code>$ git cherry-pick A^..B 
</code></pre><p>示例</p><p>将分支dev1的某一次提交合并到dev2分支</p><pre tabindex=0><code>git checkout dev2  
git cherry-pick 62ecb3 
</code></pre><p>将分支dev1的多次提交合并到dev2分支</p><pre tabindex=0><code>git checkout dev2  
git cherry-pick 62ecb3 62ecb6
</code></pre><p>参考链接: <a href=https://www.ruanyifeng.com/blog/2020/04/git-cherry-pick.html>https://www.ruanyifeng.com/blog/2020/04/git-cherry-pick.html</a></p></article></div></body><div>
<small> words: 1521 tags:</small>
<small><code><a href=https://arair.net/tags/git>git</a></code></small>
</div></html></body><script>var _hmt=_hmt||[];(function(){var e=document.createElement("script"),t;e.src="https://hm.baidu.com/hm.js?bd28dafb59c7621d0ab721cefd01691b",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)})()</script>
<script id=LA_COLLECT src=//sdk.51.la/js-sdk-pro.min.js></script>
<script>LA.init({id:"JMTlKgP6j8mqnJSa",ck:"JMTlKgP6j8mqnJSa"})</script>
<link rel=stylesheet href=//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.2.0/build/styles/default.min.css>
<script src=//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.2.0/build/highlight.min.js></script>
<script>hljs.highlightAll()</script>
<script src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script>
<script>window.onload=function(){mermaid.initialize({theme:"default"}),mermaid.init(void 0,".language-mermaid")}</script>
</html>