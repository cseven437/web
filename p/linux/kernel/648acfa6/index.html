<!doctype html><html><title>Kernel_panic</title><meta name=description content="需要打开以下项，保证有足够的调试信息
1 2 3 4 5 6 CONFIG_DEBUG_KERNEL=y CONFIG_DEBUG_INFO=y CONFIG_KALLSYMS=y CONFIG_KALLSYMS_ALL=y CONFIG_DEBUG_BUGVERBOSE=y CONFIG_STACKTRACE=y "><meta name=generator content="Hugo 0.101.0"><meta property="og:title" content="Kernel_panic"><meta property="og:description" content="需要打开以下项，保证有足够的调试信息


1
2
3
4
5
6


CONFIG_DEBUG_KERNEL=y
CONFIG_DEBUG_INFO=y
CONFIG_KALLSYMS=y
CONFIG_KALLSYMS_ALL=y
CONFIG_DEBUG_BUGVERBOSE=y
CONFIG_STACKTRACE=y


"><meta property="og:type" content="article"><meta property="og:url" content="https://arair.net/p/linux/kernel/648acfa6/"><meta property="article:section" content="p"><meta property="article:published_time" content="2021-01-24T11:49:21+08:00"><meta property="article:modified_time" content="2021-09-12T18:05:24+08:00"><meta itemprop=name content="Kernel_panic"><meta itemprop=description content="需要打开以下项，保证有足够的调试信息


1
2
3
4
5
6


CONFIG_DEBUG_KERNEL=y
CONFIG_DEBUG_INFO=y
CONFIG_KALLSYMS=y
CONFIG_KALLSYMS_ALL=y
CONFIG_DEBUG_BUGVERBOSE=y
CONFIG_STACKTRACE=y


"><meta itemprop=datePublished content="2021-01-24T11:49:21+08:00"><meta itemprop=dateModified content="2021-09-12T18:05:24+08:00"><meta itemprop=wordCount content="563"><meta itemprop=keywords content><style type=text/css>.markdown-body{box-sizing:border-box;min-width:200px;max-width:980px;margin:0 auto;padding:45px;font-family:Consolas,courier new,monospace}@media(max-width:767px){.markdown-body{padding:15px}}</style><script>function setTheme({el:e=document.documentElement,mode:t="auto",light:n="light",dark:s="dark"}){e.dataset.colorMode=t,e.dataset.lightTheme=n,e.dataset.darkTheme=s}let prefersDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches;prefersDarkMode&&setTheme({mode:"dark"})</script><body id=content class=markdown-body><body><div id=post class=post><article><header><h1 class=post-title>Kernel_panic</h1><p><small>2021-01-24, updated 2021-09-12</small></p></header><aside><nav id=TableOfContents></nav></aside><p>需要打开以下项，保证有足够的调试信息</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>CONFIG_DEBUG_KERNEL=y
</span></span><span style=display:flex><span>CONFIG_DEBUG_INFO=y
</span></span><span style=display:flex><span>CONFIG_KALLSYMS=y
</span></span><span style=display:flex><span>CONFIG_KALLSYMS_ALL=y
</span></span><span style=display:flex><span>CONFIG_DEBUG_BUGVERBOSE=y
</span></span><span style=display:flex><span>CONFIG_STACKTRACE=y
</span></span></code></pre></td></tr></table></div></div><p>panic 信息</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>[  201.500000] hello,world
</span></span><span style=display:flex><span>[  201.510000] Kernel bug detected[#1]:
</span></span><span style=display:flex><span>[  201.510000] CPU: 0 PID: 2491 Comm: insmod Not tainted 3.10.90 #10
</span></span><span style=display:flex><span>[  201.510000] task: 871732a0 ti: 84248000 task.ti: 84248000
</span></span><span style=display:flex><span>[  201.510000] $ 0   : 00000000 80840000 00000001 000052a0
</span></span><span style=display:flex><span>[  201.510000] $ 4   : c013c260 c013c260 ffffd988 00100000
</span></span><span style=display:flex><span>[  201.510000] $ 8   : 00000064 00000003 00000000 00000000
</span></span><span style=display:flex><span>[  201.510000] $12   : 00000187 00000000 00000000 00000000
</span></span><span style=display:flex><span>[  201.510000] $16   : c013c260 8002f34c 00000000 c0144000
</span></span><span style=display:flex><span>[  201.510000] $20   : 00000000 806c0000 00000001 840dbe80
</span></span><span style=display:flex><span>[  201.510000] $24   : 00000002 8000183c                  
</span></span><span style=display:flex><span>[  201.510000] $28   : 84248000 8424bdc8 00000001 c0144084
</span></span><span style=display:flex><span>[  201.510000] Hi    : 00000000
</span></span><span style=display:flex><span>[  201.510000] Lo    : 364ea000
</span></span><span style=display:flex><span>[  201.510000] epc   : 8002f354 add_timer+0x8/0x14
</span></span><span style=display:flex><span>[  201.510000]     Not tainted
</span></span><span style=display:flex><span>[  201.510000] ra    : c0144084 init_module+0x84/0x9c [timer_test]
</span></span><span style=display:flex><span>[  201.510000] Status: 1000f403 KERNEL EXL IE 
</span></span><span style=display:flex><span>[  201.510000] Cause : 10800034
</span></span><span style=display:flex><span>[  201.510000] PrId  : 00019385 (MIPS 24Kc)
</span></span><span style=display:flex><span>[  201.510000] Modules linked in: timer_test(+) GobiNet [last unloaded: timer_test]
</span></span><span style=display:flex><span>[  201.510000] Process insmod (pid: 2491, threadinfo=84248000, task=871732a0, tls=77e0be50)
</span></span><span style=display:flex><span>[  201.510000] Stack : 00000001 00000001 c013c120 ffffffff c013c12c c013c12c 80840000 8000043c
</span></span><span style=display:flex><span>          00000000 8080007f 00000001 8428fe00 8424bed8 c013c12c c013c120 80046e04
</span></span><span style=display:flex><span>          8424bed8 c013c12c c013c120 8424bed8 806c0000 00000000 806c0000 80061c48
</span></span><span style=display:flex><span>          c013c120 771f8e54 00000001 8008f920 c013c12c 00007fff 8005f290 8424be88
</span></span><span style=display:flex><span>          fff94000 00000000 00000000 00000000 00000000 00000000 00000000 00464008
</span></span><span style=display:flex><span>          ...
</span></span><span style=display:flex><span>[  201.510000] Call Trace:
</span></span><span style=display:flex><span>[  201.510000] [&lt;8002f354&gt;] add_timer+0x8/0x14
</span></span><span style=display:flex><span>[  201.510000] [&lt;c0144084&gt;] init_module+0x84/0x9c [timer_test]
</span></span><span style=display:flex><span>[  201.510000] [&lt;8000043c&gt;] do_one_initcall+0x3c/0x1b4
</span></span><span style=display:flex><span>[  201.510000] [&lt;80061c48&gt;] load_module+0xf84/0x14c4
</span></span><span style=display:flex><span>[  201.510000] [&lt;8006225c&gt;] SyS_init_module+0xd4/0xec
</span></span><span style=display:flex><span>[  201.510000] [&lt;8000b244&gt;] stack_done+0x20/0x40
</span></span><span style=display:flex><span>[  201.510000] 
</span></span><span style=display:flex><span>[  201.510000] 
</span></span><span style=display:flex><span>Code: 00402021  8c820000  0002102b &lt;00020336&gt; 0800bc71  8c850008  27bdffd8  afbf0024  afb30020 
</span></span><span style=display:flex><span>[  201.510000] c0_compare_interrupt 64
</span></span></code></pre></td></tr></table></div></div><p>可以使用gdb来查看错误位置</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>$ gdb vmlinux 
</span></span><span style=display:flex><span>GNU gdb (Ubuntu 7.7.1-0ubuntu5~14.04.3) 7.7.1
</span></span><span style=display:flex><span>Copyright (C) 2014 Free Software Foundation, Inc.
</span></span><span style=display:flex><span>License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
</span></span><span style=display:flex><span>This is free software: you are free to change and redistribute it.
</span></span><span style=display:flex><span>There is NO WARRANTY, to the extent permitted by law.  Type &#34;show copying&#34;
</span></span><span style=display:flex><span>and &#34;show warranty&#34; for details.
</span></span><span style=display:flex><span>This GDB was configured as &#34;x86_64-linux-gnu&#34;.
</span></span><span style=display:flex><span>Type &#34;show configuration&#34; for configuration details.
</span></span><span style=display:flex><span>For bug reporting instructions, please see:
</span></span><span style=display:flex><span>&lt;http://www.gnu.org/software/gdb/bugs/&gt;.
</span></span><span style=display:flex><span>Find the GDB manual and other documentation resources online at:
</span></span><span style=display:flex><span>&lt;http://www.gnu.org/software/gdb/documentation/&gt;.
</span></span><span style=display:flex><span>For help, type &#34;help&#34;.
</span></span><span style=display:flex><span>Type &#34;apropos word&#34; to search for commands related to &#34;word&#34;...
</span></span><span style=display:flex><span>Reading symbols from vmlinux...done.
</span></span><span style=display:flex><span>(gdb) l *add_timer+0x8
</span></span><span style=display:flex><span>0x8002f3e8 is in add_timer (/home/bmduser10/develop/realtek/R810/rtl819x/linux-3.10/arch/mips-ori/include/asm/bug.h:29).
</span></span><span style=display:flex><span>24                      if (condition)
</span></span><span style=display:flex><span>25                              BUG();
</span></span><span style=display:flex><span>26                      else
</span></span><span style=display:flex><span>27                              return;
</span></span><span style=display:flex><span>28              }
</span></span><span style=display:flex><span>29              __asm__ __volatile__(&#34;tne $0, %0, %1&#34;
</span></span><span style=display:flex><span>30                                   : : &#34;r&#34; (condition), &#34;i&#34; (BRK_BUG));
</span></span><span style=display:flex><span>31      }
</span></span><span style=display:flex><span>32
</span></span><span style=display:flex><span>33      #define BUG_ON(C) __BUG_ON((unsigned long)(C))
</span></span></code></pre></td></tr></table></div></div><p>需要有Reading symbols from vmlinux&mldr;done.才能调试，如果没有会显示Reading symbols from vmlinux&mldr;(no debugging symbols found)&mldr;done.</p></article></div></body><div><small>words: 563 tags:</small></div></html></body><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?bd28dafb59c7621d0ab721cefd01691b",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><script id=LA_COLLECT src=//sdk.51.la/js-sdk-pro.min.js></script>
<script>LA.init({id:"JMTlKgP6j8mqnJSa",ck:"JMTlKgP6j8mqnJSa"})</script></html>